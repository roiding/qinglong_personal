# E5 OneDrive 监控配置示例
# 使用前请将此文件复制为 .env 或在青龙面板中设置环境变量

# Azure AD 配置 (必需)
# 租户 ID (在 Azure Portal > Azure Active Directory > 概述 中查看)
E5_TENANT_ID=your-tenant-id-here

# 客户端 ID (应用程序客户端 ID)
# 注意：使用用户名密码认证时，需要使用支持 ROPC 流程的应用
E5_CLIENT_ID=your-client-id-here

# 管理员账号用户名 (用于登录查询)
E5_USERNAME=admin@yourdomain.onmicrosoft.com

# 管理员账号密码
E5_PASSWORD=your-password-here

# 用户筛选前缀 (可选，默认为 "Salted Fish")
# 脚本会筛选所有显示名称或邮箱以此前缀开头的用户
# 示例: "Salted Fish", "Test", "User-" 等
E5_USER_PREFIX=Salted Fish

# ============================================================
# 功能说明:
# ============================================================
# 脚本会自动筛选所有以 E5_USER_PREFIX 开头的用户账号
# 并生成这些账号的 OneDrive 使用情况报表
# 如果不设置 E5_USER_PREFIX，默认筛选 "Salted Fish" 开头的账号
# ============================================================

# ============================================================
# Azure AD 应用权限配置说明:
# ============================================================
# 1. 前往 Azure Portal: https://portal.azure.com
# 2. 进入 Azure Active Directory > 应用注册
# 3. 创建新应用或选择现有应用
# 4. 在"身份验证"中:
#    - 添加"移动和桌面应用程序"平台
#    - 勾选"允许公共客户端流"以启用 ROPC (资源所有者密码凭据)
# 5. 在"API 权限"中添加以下委托权限 (Delegated permissions):
#    - User.Read.All (读取所有用户信息)
#    - Files.Read.All (读取所有文件)
#    - Sites.Read.All (读取所有网站)
# 6. 点击"授予管理员同意"
# 7. 使用具有全局管理员或用户管理员权限的账号作为 E5_USERNAME
# ============================================================
#
# 注意事项:
# - ROPC 流程不支持 MFA (多因素认证)
# - 建议使用专门的服务账号
# - 定期更换密码以提高安全性
# ============================================================
